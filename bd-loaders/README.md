## üì§–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ frost –ë–î
### `/loader`
ETL-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (Extract, Transform, Load) –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–µ—Ä–≤–µ—Ä–∞ FROST (–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ SensorThings API) http://90.156.134.128:8080/FROST-Server/v1.1 –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Ö –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- `START_FROM_DT`: –î–∞—Ç–∞-—Å—Ç–∞—Ä—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 2024-01-01 UTC). –§–æ—Ä–º–∞—Ç: datetime(YYYY, MM, DD, tzinfo=timezone.utc).
- `DS_INCLUDE`: –ú–Ω–æ–∂–µ—Å—Ç–≤–æ ID Datastreams –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è (set(), –ø—Ä–∏–º–µ—Ä: {1, 2, 3}). –ï—Å–ª–∏ –ø—É—Å—Ç–æ ‚Äî –≤—Å–µ.
- `DS_EXCLUDE`: –ú–Ω–æ–∂–µ—Å—Ç–≤–æ ID Datastreams –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è (set(), –ø—Ä–∏–º–µ—Ä: {10, 11}). –ï—Å–ª–∏ –ø—É—Å—Ç–æ ‚Äî –Ω–∏–∫–∞–∫–∏—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π.
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç `Locations` (–ª–æ–∫–∞—Ü–∏–∏ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –≤ PostGIS).
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç `Things` (—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞/—Å–µ–Ω—Å–æ—Ä—ã), –≤–∫–ª—é—á–∞—è –∏—Å—Ç–æ—Ä–∏—é –∏—Ö –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π `HistoricalLocations` –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ —Å –ª–æ–∫–∞—Ü–∏—è–º–∏.
- –û–±–Ω–æ–≤–ª—è–µ—Ç `ObservedProperties` (—Å–≤–æ–π—Å—Ç–≤–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π) —Å —É—á–µ—Ç–æ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∏–º–µ–Ω–∏ –∏ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è (—Å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å—é –ø–æ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—é + –µ–¥–∏–Ω–∏—Ü–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è). –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π ID; –∏–Ω–∞—á–µ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π.
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç `Datastreams` (–ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö), —Å–≤—è–∑—ã–≤–∞—è –∏—Ö —Å `Things` –∏ `ObservedProperties`.
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ `Datastream` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–æ–≤—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –∏–∑–≤–µ—Å—Ç–Ω–æ–π –¥–∞—Ç—ã (–∏–ª–∏ —Å START_FROM_DT –¥–ª—è –Ω–æ–≤—ã—Ö).
- –ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ —á–∞—Å–∞–º: —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ä–µ–¥–Ω–µ–µ (avg), –º–∏–Ω–∏–º—É–º (min), –º–∞–∫—Å–∏–º—É–º (max) –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (count) –∑–Ω–∞—á–µ–Ω–∏–π.
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `—Ç–∞–±–ª–∏—Ü—É observation_hour`, —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ `Thing`, `Location` (–Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ä–µ–º–µ–Ω–∏) –∏ `Datastream`.
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ —Ç–∞–±–ª–∏—Ü–µ `ingestion_state` (–≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫ ‚Äî last_time –¥–ª—è –∫–∞–∂–¥–æ–≥–æ `Datastream`).
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç `Datastreams`, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–∫–æ–¥ 404), –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—è, —á—Ç–æ –æ–Ω–∏ —Å –¥—Ä—É–≥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞.

üöÄ–ó–∞–ø—É—Å–∫
```bash
uv sync
source .venv/nin/activate
python ingest_frost.py
```

### `/loader-rudn`
ETL-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (Extract, Transform, Load) –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–µ—Ä–≤–µ—Ä–∞ FROST (–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ SensorThings API) http://94.154.11.74/frost/v1.1 –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Ö –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- `START_FROM_DT`: –î–∞—Ç–∞-—Å—Ç–∞—Ä—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 2024-01-01 UTC). –§–æ—Ä–º–∞—Ç: datetime(YYYY, MM, DD, tzinfo=timezone.utc).
- `TARGET_LOCATIONS`: –°–ø–∏—Å–æ–∫ –ª–æ–∫–∞—Ü–∏–π –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–≤ –∫–æ–¥–µ: ["Main RUDN University campus"]). –ò–∑–º–µ–Ω–∏—Ç–µ –≤ —Å–∫—Ä–∏–ø—Ç–µ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å/—É–±—Ä–∞—Ç—å. –ï—Å–ª–∏ –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ.
- `Locations`: –ò–∑–≤–ª–µ–∫–∞–µ—Ç –ª–æ–∫–∞—Ü–∏–∏, –ø–∞—Ä—Å–∏—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (—Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º –∏–∑ EPSG:3857 –≤ EPSG:4326, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ) –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É `location`.
- `Things`: –ó–∞–≥—Ä—É–∂–∞–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –∏—Ö –∏—Å—Ç–æ—Ä–∏—é –ª–æ–∫–∞—Ü–∏–π –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—ã `thing` –∏ `thing_location` (—Å —É—á–µ—Ç–æ–º –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤).
- `Observed Properties`: –°–≤–æ–π—Å—Ç–≤–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π (—Å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å—é –ø–æ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—é + –µ–¥–∏–Ω–∏—Ü–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è), —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `observed_property`.
- `Datastreams`: –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –≤–∫–ª—é—á–∞—è –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `datastream`.
- `MultiDatastreams`: –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–≥–æ–º–µ—Ä–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö `datastreams` (—Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏ –∏ –µ–¥–∏–Ω–∏—Ü–∞–º–∏ –¥–ª—è –†–£–î–ù, –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—Å—Å–∏–≤–∞ RUDN_OBS_PROPS).
- `Observations`: –ò–∑–≤–ª–µ–∫–∞–µ—Ç –Ω–∞–±–ª—é–¥–µ–Ω–∏—è (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑–º–µ—Ä–µ–Ω–∏–π), –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –∏—Ö –ø–æ —á–∞—Å–∞–º (—Å—Ä–µ–¥–Ω–µ–µ, –º–∏–Ω/–º–∞–∫—Å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ) –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `observation_hour`. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É —Å –≤–æ–¥—è–Ω—ã–º –∑–Ω–∞–∫–æ–º (watermark) –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤.

üöÄ–ó–∞–ø—É—Å–∫
```bash
uv sync
source .venv/nin/activate
python ingest_frost.py
```
